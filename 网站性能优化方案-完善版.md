# ç½‘ç«™æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ - å®Œå–„ç‰ˆï¼ˆåŸºäºä¸“å®¶å®¡æ ¸ï¼‰

## ğŸ“Š ä¸€ã€æ€»ä½“è¯„ä»·

âœ… **åŸæ–¹æ¡ˆæ–¹å‘æ­£ç¡®**ï¼Œä½†éœ€è¦è¡¥å……ä»¥ä¸‹å…³é”®ç‚¹ï¼š

1. **LCPä¼˜åŒ–ä¸èƒ½åªé å‹ç¼©** - éœ€è¦è°ƒæ•´æ¸²æŸ“ç­–ç•¥ï¼ˆSSR + priorityï¼‰
2. **WebP + CDN å¿…é¡»ç»“åˆç¼“å­˜ç­–ç•¥** - é¿å…é‡å¤æ‹‰å–
3. **ç¬¬ä¸‰æ–¹è„šæœ¬å½±å“è¢«ä½ä¼°** - GTM/Maps/Clarity é˜»å¡çº¦400ms

---

## ğŸ¯ äºŒã€ä¼˜åŒ–æ–¹æ¡ˆï¼ˆ3é˜¶æ®µï¼Œå«ä¸“å®¶è¡¥å……ï¼‰

### ğŸ”´ **é˜¶æ®µ1ï¼šç´§æ€¥ä¿®å¤ï¼ˆ2å°æ—¶ï¼‰**

#### 1.1 å‹ç¼©hero-banner.jpg
```bash
# ä½¿ç”¨Squoosh CLIæˆ–sharpæ‰¹å¤„ç†
npx @squoosh/cli --webp auto public/images/hero-banner.jpg
# æˆ–ä½¿ç”¨sharp
npx sharp --input public/images/hero-banner.jpg --webp --quality 85 --output public/images/hero-banner.webp
```

**ç›®æ ‡**: 2.0MB â†’ <300KB

---

#### 1.2 HeroSectionæ”¹ç”¨Next.js Imageï¼ˆå…³é”®ä¿®æ”¹ï¼‰

**âš ï¸ é‡ç‚¹**: å»æ‰`background-image`ï¼Œç›´æ¥ä½¿ç”¨`<Image priority />`

**ä¿®æ”¹æ–‡ä»¶**: `src/components/features/HeroSection.tsx`

```tsx
// âŒ å½“å‰ä»£ç ï¼ˆé—®é¢˜ï¼šbackground-imageæ— æ³•ä¼˜åŒ–ï¼‰
<div style={{ backgroundImage: `url(${currentSlide.image})` }} />

// âœ… ä¼˜åŒ–åï¼ˆSSRç›´å‡º + priority + fetchpriorityï¼‰
import Image from 'next/image'

<div className="relative h-screen min-h-[700px]">
  <Image
    src="/images/hero-banner.webp"
    alt="AIERXUAN Professional Laptop Manufacturer"
    fill
    priority
    quality={85}
    sizes="(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 100vw"
    className="object-cover"
    style={{ objectPosition: 'center' }}
  />
  
  {/* æ¸å˜é®ç½©å±‚ */}
  <div className="absolute inset-0 bg-gradient-to-br from-blue-900/20 via-blue-800/15 to-blue-700/10 z-10"></div>
  
  {/* å†…å®¹å±‚ */}
  <div className="relative z-20 h-full max-w-7xl mx-auto px-6">
    {/* Heroå†…å®¹ */}
  </div>
</div>
```

**å…³é”®ç‚¹**:
- âœ… ä½¿ç”¨`fill`å±æ€§ï¼ˆå“åº”å¼ï¼‰
- âœ… æ·»åŠ `priority`ï¼ˆé¦–å±ä¼˜å…ˆï¼‰
- âœ… è®¾ç½®`sizes`ï¼ˆå“åº”å¼å›¾ç‰‡ï¼‰
- âœ… ä½¿ç”¨`z-index`åˆ†å±‚ï¼ˆå›¾ç‰‡ â†’ é®ç½© â†’ å†…å®¹ï¼‰

---

#### 1.3 æ·»åŠ å›¾ç‰‡é¢„åŠ è½½å’Œé¢„è¿æ¥

**ä¿®æ”¹æ–‡ä»¶**: `src/app/layout.tsx`

```tsx
export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <head>
        {/* é¢„åŠ è½½å…³é”®å›¾ç‰‡ */}
        <link
          rel="preload"
          as="image"
          href="/images/hero-banner.webp"
          type="image/webp"
          fetchpriority="high"
        />
        
        {/* é¢„è¿æ¥å…³é”®åŸŸå */}
        <link rel="preconnect" href="https://dudvgnkvukujhqatolqm.supabase.co" />
        <link rel="preconnect" href="https://www.googletagmanager.com" />
        <link rel="dns-prefetch" href="https://www.google-analytics.com" />
      </head>
      <body>{children}</body>
    </html>
  )
}
```

---

#### 1.4 é…ç½®Next.jså›¾ç‰‡ä¼˜åŒ–

**ä¿®æ”¹æ–‡ä»¶**: `next.config.js`

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
    minimumCacheTTL: 31536000, // 1å¹´ç¼“å­˜
  },
}

module.exports = nextConfig
```

---

#### 1.5 éªŒè¯æ¸…å•

- [ ] hero-banner.webp < 300KB
- [ ] HeroSectionä½¿ç”¨`<Image priority />`
- [ ] å›¾ç‰‡é¢„åŠ è½½é…ç½®å®Œæˆ
- [ ] Lighthouseæµ‹è¯•ï¼šLCP < 5s
- [ ] Lighthouseåˆ†æ•° â‰¥ 80

**é¢„æœŸæ•ˆæœ**: LCPä»40.6sé™è‡³**4.5s**

---

### âš ï¸ **é˜¶æ®µ2ï¼šé‡è¦ä¼˜åŒ–ï¼ˆ3å°æ—¶ï¼‰**

#### 2.1 æ‰¹é‡å‹ç¼©æ‰€æœ‰å›¾ç‰‡

```bash
# åˆ›å»ºWebPç‰ˆæœ¬
cd aierxuan-website/public/images

# æ‰¹é‡è½¬æ¢æ‰€æœ‰JPG
for file in *.jpg; do
  npx @squoosh/cli --webp auto "$file"
done

# æˆ–ä½¿ç”¨sharpï¼ˆæ›´å¿«ï¼‰
npx sharp --input "*.jpg" --webp --quality 85 --output ./
```

**ç›®æ ‡å‹ç¼©åˆ—è¡¨**:
| æ–‡ä»¶ | å½“å‰ | ç›®æ ‡ | å‹ç¼©ç‡ |
|------|------|------|--------|
| hero-banner.jpg | 2.0MB | 250KB | 87% |
| about-hero-banner-new.jpg | 1.2MB | 180KB | 85% |
| blog-hero-banner.jpg | 1.0MB | 150KB | 85% |
| manufacturing-*.jpg (4å¼ ) | 3.9MB | 540KB | 86% |
| factory-*.jpg (6å¼ ) | 5.7MB | 785KB | 86% |

**æ€»èŠ‚çœ**: 13.8MB â†’ 1.9MBï¼ˆèŠ‚çœ86%ï¼‰

---

#### 2.2 æ›´æ–°æ‰€æœ‰ç»„ä»¶ä½¿ç”¨WebP + æ‡’åŠ è½½

**ä¿®æ”¹æ–‡ä»¶**: 
- `src/components/features/ManufacturingCapability.tsx`
- `src/components/about/FactorySection.tsx`

```tsx
// âœ… ä¼˜åŒ–åï¼ˆæ‡’åŠ è½½ + WebPï¼‰
<Image
  src="/images/manufacturing-1.webp"
  alt="Modern Factory"
  width={600}
  height={400}
  loading="lazy"  // æ‡’åŠ è½½
  quality={85}
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
/>
```

---

#### 2.3 é…ç½®ç¼“å­˜ç­–ç•¥

**ä¿®æ”¹æ–‡ä»¶**: `next.config.js`

```js
const nextConfig = {
  async headers() {
    return [
      {
        source: '/images/:path*',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable',
          },
        ],
      },
    ]
  },
}
```

---

#### 2.4 å»¶è¿ŸåŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬

**ä¿®æ”¹æ–‡ä»¶**: `src/app/layout.tsx`

```tsx
'use client'

import { useEffect } from 'react'
import Script from 'next/script'

export default function RootLayout({ children }) {
  // å»¶è¿ŸåŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬
  useEffect(() => {
    if ('requestIdleCallback' in window) {
      requestIdleCallback(() => {
        // åŠ è½½GTM
        window.dataLayer = window.dataLayer || []
        // åŠ è½½Clarity
        // åŠ è½½å…¶ä»–åˆ†æè„šæœ¬
      })
    } else {
      setTimeout(() => {
        // Fallback
      }, 2000)
    }
  }, [])

  return (
    <html>
      <head>
        {/* é¢„åŠ è½½å’Œé¢„è¿æ¥ */}
      </head>
      <body>
        {children}
        
        {/* ç¬¬ä¸‰æ–¹è„šæœ¬æ”¾åœ¨bodyå°¾éƒ¨ */}
        <Script
          src="https://www.googletagmanager.com/gtag/js"
          strategy="lazyOnload"
        />
      </body>
    </html>
  )
}
```

---

#### 2.5 éªŒè¯æ¸…å•

- [ ] æ‰€æœ‰å›¾ç‰‡å·²è½¬æ¢ä¸ºWebP
- [ ] éé¦–å±å›¾ç‰‡ä½¿ç”¨æ‡’åŠ è½½
- [ ] ç¼“å­˜ç­–ç•¥é…ç½®å®Œæˆ
- [ ] ç¬¬ä¸‰æ–¹è„šæœ¬å»¶è¿ŸåŠ è½½
- [ ] Lighthouseæµ‹è¯•ï¼šLCP < 3s
- [ ] Speed Index < 4s

**é¢„æœŸæ•ˆæœ**: 
- LCP: 4.5s â†’ **2.3s**
- Speed Index: 8.6s â†’ **3.5s**

---

### ğŸŸ¢ **é˜¶æ®µ3ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆ4å°æ—¶ï¼‰**

#### 3.1 ä»£ç åˆ†å‰² - å»¶è¿ŸåŠ è½½éå…³é”®ç»„ä»¶

**ä¿®æ”¹æ–‡ä»¶**: `src/app/page.tsx`

```tsx
import dynamic from 'next/dynamic'

// é¦–å±ç»„ä»¶ - æ­£å¸¸å¯¼å…¥
import { HeroSection } from '@/components/features/HeroSection'
import { ProductCategories } from '@/components/features/ProductCategories'

// éé¦–å±ç»„ä»¶ - åŠ¨æ€å¯¼å…¥
const ManufacturingCapability = dynamic(
  () => import('@/components/features/ManufacturingCapability'),
  { loading: () => <div className="h-96 animate-pulse bg-gray-100" /> }
)

const TechnicalCapabilities = dynamic(
  () => import('@/components/features/TechnicalCapabilities')
)

const FAQSection = dynamic(
  () => import('@/components/features/FAQSection')
)

export default function Home() {
  return (
    <div>
      <HeroSection />
      <ProductCategories />
      <ManufacturingCapability />
      <TechnicalCapabilities />
      <FAQSection />
    </div>
  )
}
```

---

#### 3.2 ä¼˜åŒ–Babelé…ç½® - ç§»é™¤IE11æ”¯æŒ

**åˆ›å»º/ä¿®æ”¹æ–‡ä»¶**: `.babelrc`

```json
{
  "presets": [
    [
      "next/babel",
      {
        "preset-env": {
          "targets": "defaults, not IE 11"
        }
      }
    ]
  ]
}
```

**æ•ˆæœ**: å‡å°‘13.6KBçš„Polyfillä»£ç 

---

#### 3.3 é…ç½®CDNåŠ é€Ÿï¼ˆCloudflareï¼‰

**æ­¥éª¤**:
1. åœ¨Cloudflareæ·»åŠ åŸŸå
2. é…ç½®Page Rules:
   ```
   URL: aierxuanlaptop.com/images/*
   Cache Level: Cache Everything
   Edge Cache TTL: 1 year
   Browser Cache TTL: 1 year
   ```

3. å¯ç”¨Auto Minifyï¼ˆJS, CSS, HTMLï¼‰
4. å¯ç”¨Brotliå‹ç¼©

---

#### 3.4 Lighthouse CIè‡ªåŠ¨åŒ–

**åˆ›å»ºæ–‡ä»¶**: `.github/workflows/lighthouse.yml`

```yaml
name: Lighthouse CI
on: [push]
jobs:
  lighthouse:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - uses: treosh/lighthouse-ci-action@v9
        with:
          urls: |
            http://localhost:3000
          uploadArtifacts: true
```

---

#### 3.5 éªŒè¯æ¸…å•

- [ ] éå…³é”®ç»„ä»¶åŠ¨æ€åŠ è½½
- [ ] Babelé…ç½®ä¼˜åŒ–
- [ ] CDNé…ç½®å®Œæˆ
- [ ] Lighthouse CIé›†æˆ
- [ ] Lighthouseæµ‹è¯•ï¼šLCP < 2.5s
- [ ] Speed Index < 3s
- [ ] Lighthouseåˆ†æ•° â‰¥ 90

**é¢„æœŸæ•ˆæœ**:
- LCP: 2.3s â†’ **1.7s**
- Speed Index: 3.5s â†’ **2.6s**
- Lighthouseåˆ†æ•°: **95+**

---

## ğŸ“ˆ ä¸‰ã€é¢„æœŸæ•ˆæœå¯¹æ¯”ï¼ˆæŠ€æœ¯æ¨¡å‹éªŒè¯ï¼‰

| æŒ‡æ ‡ | å½“å‰ | é˜¶æ®µ1å | é˜¶æ®µ2å | é˜¶æ®µ3å | ç†æƒ³å€¼ |
|------|------|---------|---------|---------|--------|
| **LCP** | ğŸ”´ 40.6s | âš ï¸ 4.5s | âœ… 2.3s | âœ… 1.7s | â‰¤2.5s |
| **Speed Index** | ğŸ”´ 8.6s | âš ï¸ 5.0s | âœ… 3.5s | âœ… 2.6s | â‰¤3s |
| **FCP** | âš ï¸ 1.8s | âœ… 1.2s | âœ… 0.9s | âœ… 0.7s | â‰¤1.5s |
| **Total Payload** | ğŸ”´ 13.3MB | âš ï¸ 6MB | âœ… 2MB | âœ… 1.5MB | <3MB |
| **Lighthouseåˆ†æ•°** | ğŸ”´ 65 | âš ï¸ 80 | âœ… 90+ | âœ… 95+ | â‰¥90 |

---

## ğŸ› ï¸ å››ã€æ‰§è¡Œé¡ºåºå’Œæ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | éªŒè¯æ–¹å¼ | ç›®æ ‡ |
|------|------|----------|----------|------|
| ğŸ”´ **é˜¶æ®µ1** | å‹ç¼©hero-banner + æ”¹Image + preload | 2å°æ—¶ | Lighthouse LCP<5s | åˆ†æ•°â‰¥80 |
| âš ï¸ **é˜¶æ®µ2** | å…¨ç«™WebP + æ‡’åŠ è½½ + ç¼“å­˜ + å»¶è¿Ÿè„šæœ¬ | 3å°æ—¶ | LCPâ‰¤3s | åˆ†æ•°â‰¥90 |
| ğŸŸ¢ **é˜¶æ®µ3** | CDN + ä»£ç åˆ†å‰² + CI | 4å°æ—¶ | LCPâ‰¤2.5s | åˆ†æ•°â‰¥95 |

**æ€»è®¡**: 9å°æ—¶  
**é¢„æœŸæå‡**: æ€§èƒ½æ”¹å–„**80-90%**

---

## âœ… äº”ã€å…³é”®è¡¥å……ï¼ˆä¸“å®¶çº§ç»†èŠ‚ï¼‰

### 5.1 æ¸²æŸ“ç­–ç•¥ä¼˜åŒ–

**ç¡®ä¿HeroSectionæ˜¯SSRç›´å‡º**:
```tsx
// src/components/features/HeroSection.tsx
// âš ï¸ ä¸è¦æ·»åŠ  'use client'ï¼Œä¿æŒæœåŠ¡ç«¯æ¸²æŸ“
export function HeroSection() {
  // ...
}
```

### 5.2 é¿å…åŠ¨ç”»é˜»å¡LCP

å¦‚æœHeroåŒºåŸŸæœ‰åŠ¨ç”»ï¼ˆframer-motionï¼‰ï¼Œå»¶è¿Ÿæ‰§è¡Œï¼š
```tsx
const [showAnimation, setShowAnimation] = useState(false)

useEffect(() => {
  // ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œæˆåå†å¯åŠ¨åŠ¨ç”»
  const img = new window.Image()
  img.src = '/images/hero-banner.webp'
  img.onload = () => setShowAnimation(true)
}, [])
```

### 5.3 DOMç»“æ„ä¼˜åŒ–

**å½“å‰é—®é¢˜**: æœ€å¤§æ·±åº¦13å±‚ã€712ä¸ªèŠ‚ç‚¹

**ä¼˜åŒ–æ–¹å‘**:
- ä½¿ç”¨Tailwindçš„`grid`/`flex`å‡å°‘åµŒå¥—
- åˆå¹¶ä¸å¿…è¦çš„`<div>`åŒ…è£¹
- ä½¿ç”¨CSS Gridæ›¿ä»£å¤šå±‚åµŒå¥—

---

## ğŸ¯ å…­ã€æœ€ç»ˆå»ºè®®

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰
1. âœ… å‹ç¼©hero-banner.jpg
2. âœ… ä¿®æ”¹HeroSectionç»„ä»¶
3. âœ… é…ç½®next.config.js
4. âœ… æ·»åŠ é¢„åŠ è½½

### æœ¬å‘¨å®Œæˆ
1. âœ… æ‰¹é‡å‹ç¼©æ‰€æœ‰å›¾ç‰‡
2. âœ… é…ç½®ç¼“å­˜ç­–ç•¥
3. âœ… å»¶è¿Ÿç¬¬ä¸‰æ–¹è„šæœ¬

### ä¸‹å‘¨å®Œæˆ
1. âœ… CDNé…ç½®
2. âœ… ä»£ç åˆ†å‰²
3. âœ… Lighthouse CI

---

**åˆ›å»ºæ—¶é—´**: 2025-11-02  
**åŸºäº**: Google PageSpeed + ä¸“å®¶å®¡æ ¸åé¦ˆ  
**é¢„æœŸæœ€ç»ˆåˆ†æ•°**: Lighthouse **95+**

